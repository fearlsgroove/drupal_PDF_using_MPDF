<?php

/**
* Implement Hook_help()
*/
function custom_mpdf_help($path , $arg)
{
	if( $path == 'admin/help#custom_mpdf') {
		$data = t('HTML to PDF conversion Using mPDF.');

		return $data;
	}
}

/**
 * Implement Hook_permission()
 */
function custom_mpdf_permission()
{
	return array(
		'adminsration custom mpdf' => array(
				'title' => t('Custom MPDF'),
				'description' => t('Permission for HTML to PDF conversion'),
			),
	);
}

/**
 * Implement Hook_menu()
 */
function custom_mpdf_menu()
{

	$menu['admin/config/user-interface/mpdf'] = array(
		'title' => 'Custom mPDF',
		'description' => 'confoguration of Custom mPDF setting',
		'page callback' => 'drupal_get_form',
		'access callback' => true,
		'page arguments' => array('custom_mpdf_config'),
		'weight' => 1,
	);

	return $menu;
}

function custom_mpdf_config()
{
  $dir = 'sites/all/libraries/mdpf';
  $file =  file_scan_directory( $dir , '/.*\.php$/' ) ;

	if( isset ($file[$dir. '/mpdf.php']) ) {
	
		$form['pdf'] = array(
			'#type' => 'fieldset',
			'#title' => 'PDF Option',
		);
	
		$form['pdf']['radio_btn'] = array(
			'#type' => 'radio',
			'#title' => 'MPDF library',
			'#description' => 'Add mPDF library to sites/all/library',
		);

		$form['pdf']['other'] = array(
			'#type' => 'fieldset',
			'#title' => 'Other Option',
		);
	
		$form['pdf']['other']['link'] = array(
			'#type' => 'radios',
			'#title' => 'Link Visiblity',
			'#options' => array('Show on every page except the listed pages :', 'Show on only the listed pages :'),
		);

		$form['pdf']['other']['link_page'] = array(
			'#type' => 'textarea',
			'#description' => t("Enter one page per line as Drupal paths. The '*' character is a wildcard. Example paths are blog for the blog page and blog/* for every personal blog. <front> is the front page. If the PHP-mode is chosen, enter PHP code between <?php ?>. Note that executing incorrect PHP-code can break your Drupal site."),
			);
	
		$form['pdf']['save_pdf'] = array(
			'#type' => 'radios',
			'#title' => 'Open PDF File in',
			'#options' => array('Web Browser', 'Save dialog box'),
		);

		$form['pdf']['page_size'] = array(
			'#type' => 'select',
			'#title' => 'Page Size',
			'#options' => array('A4', 'Letter', 'Portrait'),
		);
		$form['pdf']['font_family'] = array(
			'#type' => 'textfield',
			'#title' => 'Font Family',
			'#value' => 'dejavusans',
		);
	
		$form['pdf']['font_size'] = array(
			'#type' => 'textfield',
			'#title' => 'Font Size',
			'#value' => '10',
		);
		
		$form['pdf']['header'] = array(
			'#type' => 'fieldset',
			'#title' => 'PDF Header Option',
		);
	
		$form['pdf']['header']['left'] = array(
			'#type' => 'textfield',
			'#title' => 'Left side content',
			'#description' => 'if not required, left blank.',
		);
			$form['pdf']['header']['center'] = array(
			'#type' => 'textfield',
			'#title' => 'Center content',
			'#description' => 'if not required, left blank.',
		);
			$form['pdf']['header']['right'] = array(
			'#type' => 'textfield',
			'#title' => 'Right side content',
			'#description' => 'if not required, left blank.',
		);
	
			$form['pdf']['footer'] = array(
			'#type' => 'fieldset',
			'#title' => 'PDF Header Option',
		);
	
		$form['pdf']['footer']['left'] = array(
			'#type' => 'textfield',
			'#title' => 'Left side content',
			'#description' => 'if not required, left blank.',
		);
			$form['pdf']['footer']['center'] = array(
			'#type' => 'textfield',
			'#title' => 'Center content',
			'#description' => 'if not required, left blank.',
		);
			$form['pdf']['footer']['right'] = array(
			'#type' => 'textfield',
			'#title' => 'Right side content',
			'#description' => 'if not required, left blank.',
		);
		
		$form['pdf']['filename'] = array(
			'#type' => 'textfield',
			'#title' => 'PDF Filename',
			'#value' => '[site:name] - [node:title] - [node:changed:custom:Y-m-d]',
		);
		$form['pdf']['save_config'] = array(
			'#type' => 'submit',
			'#value' => 'Save Configuration',
		);
	
	
		return $form;
  }
  
}




